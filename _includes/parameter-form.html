<div class="llm-param-form">
  <form id="llmParamsForm">
    <div class="form-row">
      <label for="model">model:</label>
      <input type="text" id="model" name="model" value="{{ site.lm.model }}">
    </div>
    <div class="form-row"> <!-- Added form-row class -->
      <label for="max_tokens">max_tokens:</label>
      <input type="number" id="max_tokens" name="max_tokens" value="{{ site.lm.max_tokens }}" step="1" min="1" max="8192">
    </div>
    <div class="form-row"> <!-- Added form-row class -->
      <label for="frequency_penalty">frequency_penalty:</label>
      <input type="number" id="frequency_penalty" name="frequency_penalty" value="{{ site.lm.frequency_penalty }}" step="0.1" min="-2.0" max="2.0">
    </div>
    <div class="form-row"> <!-- Added form-row class -->
      <label for="presence_penalty">presence_penalty:</label>
      <input type="number" id="presence_penalty" name="presence_penalty" value="{{ site.lm.presence_penalty }}" step="0.1" min="-2.0" max="2.0">
    </div>
    <div class="form-row"> <!-- Added form-row class -->
      <label for="temperature">temperature:</label>
      <input type="number" id="temperature" name="temperature" value="{{ site.lm.temperature }}" step="0.1" min="0.0" max="2.0">
    </div>
    <div class="form-row"> <!-- Added form-row class -->
      <label for="top_p">top_p:</label>
      <input type="number" id="top_p" name="top_p" value="{{ site.lm.top_p }}" step="0.1" min="0.1" max="1">
    </div>
    <div class="form-row">
      <label for="instructions_file">instructions_file:</label>
      <input type="text" id="instructions_file" name="instructions_file" value="{{ site.machine.instructions_file }}">
    </div>
    <div> <!-- This div can remain as is for the button, or you can add form-row and adjust alignment if needed -->
      <a href="#" id="navigateToMachineLink" class="styled-link-button">Thingk with these settings, Machine.</a>
    </div>
  </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const navigateLink = document.getElementById('navigateToMachineLink');
        if (navigateLink) {
            navigateLink.addEventListener('click', function(event) {
                event.preventDefault();
                const form = document.getElementById('llmParamsForm');
                const params = {};
                new FormData(form).forEach((value, key) => {
                if (value) {
                    params[key] = value;
                }
              });

              const queryParams = new URLSearchParams(params);

              // Construct the target URL using Jekyll's relative_url filter for robustness
              const targetBaseUrl = "{{ 'machine' | relative_url }}";
              const targetUrl = targetBaseUrl + '?' + queryParams.toString();

              window.location.href = targetUrl;
            });
        }
    });
</script>

